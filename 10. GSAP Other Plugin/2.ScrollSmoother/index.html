<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GSAP ScrollSmoother Plug In</title>

    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }

      #smooth-wrapper {
        position: relative;
        overflow: hidden;
      }

      #smooth-content {
        /* This is the scrollable area */
        position: relative; /* Required for internal positioning */
        will-change: transform; /* Optimize for smoother scrolling */
        min-height: 100%; /* Ensure content stretches full height */
      }

      section {
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
      }

      .parallax {
        overflow: hidden;
        height: 60vh;
      }

      .parallax img {
        width: 100%;
        display: block;
      }

      .box {
        width: 150px;
        height: 150px;
        background: #e74c3c;
        margin: 2rem auto;
        text-align: center;
        color: white;
        font-size: 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      button {
        margin-top: 2rem;
        padding: 10px 20px;
        font-size: 1rem;
      }
    </style>
  </head>

  <body>
    <div id="smooth-wrapper">
      <div id="smooth-content">
        <!-- Content must inside smooth-content and smooth-wrapper for smooth scroller effect -->
        <section style="background: #f1c40f">Scroll Down ‚Üì</section>
        <h1 style="text-align: center">
          Full GSAP ScrollSmoother Demo (Basic to Advanced)
        </h1>
        <p style="text-align: center">
          Covers all configuration options and methods with working examples.
        </p>

        <!-- Parallax Image -->
        <section class="parallax">
          <img
            src="https://via.placeholder.com/1200x800"
            data-speed="auto"
            alt="Parallax Image"
          />
        </section>

        <!-- Speed-based scroll effects -->
        <section style="background: #2ecc71">
          <div data-speed="0.5">üì¶ Slow Scroll Speed (0.5)</div>
          <div data-speed="2">üöÄ Fast Scroll Speed (2)</div>
        </section>

        <!-- Lag and speed example -->
        <section style="background: #9b59b6">
          <div class="box" data-lag="0.5" data-speed="1">Lag Box</div>
        </section>

        <!-- Button to trigger scroll, pause, kill etc. -->
        <section style="background: #34495e; flex-direction: column">
          <button id="scrollTopBtn">üîº Scroll to Top</button>
          <button id="pauseBtn">‚è∏ Pause Smoother</button>
          <button id="resumeBtn">‚ñ∂Ô∏è Resume Smoother</button>
          <button id="killBtn">üíÄ Kill Smoother</button>
          <button id="logVelocity">üìä Log Velocity</button>
        </section>
      </div>
    </div>

    <!-- GSAP CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/ScrollSmoother.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        //  Register plugins
        gsap.registerPlugin(ScrollTrigger, ScrollSmoother);

        //^ Basic Config
        // ScrollSmoother.create({
        //   smooth: 2,
        //   effect: true,
        //   normalizeScroll: true,
        //  });

        //^  Create the ScrollSmoother instance with full configuration
        const smoother = ScrollSmoother.create({
          wrapper: "#smooth-wrapper", // container that holds scrollable content
          content: "#smooth-content", // the content that gets transformed
          smooth: 1.1, // duration (in seconds) to catch up to scroll
          smoothTouch: 0.2, // smoothing on touch devices
          normalizeScroll: true, // keeps scroll synced on mobile
          effects: true, // auto-enable data-speed and data-lag
          speed: 1, // overall scroll speed multiplier
          ease: "power1.inOut", // scroll easing (default is 'expo')
          effectsPadding: 150, // extra effect range padding (in px)
          effectsPrefix: "", // keep default data-speed, data-lag names
          ignoreMobileResize: true, // prevent refresh on mobile height resize

          //  NEW: Auto resize/recalculation on viewport changes (recommended)
          autoResize: true,

          //  NEW: Fires when any element receives focus (accessibility)
          onFocusIn: (self, event) => {
            console.log("Focused on element:", event.target);
            return true; // return false to skip scrolling to it
          },

          //  Callback: fires every scroll tick
          onUpdate: (self) => {
            console.log("Progress:", self.progress.toFixed(2));
          },

          //  Callback: fires when scroll stops (caught up to position)
          onStop: () => {
            console.log(" Scroll stopped.");
          },
        });

        //  Dynamically apply lag/speed to a box (JS alternative to HTML attributes)
        smoother.effects(".box", {
          speed: 1,
          lag: 0.7,
        });

        //  Scroll to top of the page
        document
          .getElementById("scrollTopBtn")
          .addEventListener("click", () => {
            smoother.scrollTo(0, true); // 0 = top, true = smooth scroll
          });

        //  Pause the smoother (disable scroll)
        document.getElementById("pauseBtn").addEventListener("click", () => {
          smoother.paused(true); // pause scrolling
          console.log("‚è∏ Smoother paused");
        });

        //  Resume the smoother
        document.getElementById("resumeBtn").addEventListener("click", () => {
          smoother.paused(false); // resume scrolling
          console.log("‚ñ∂Ô∏è Smoother resumed");
        });

        //  Kill the smoother instance (disable ScrollSmoother entirely)
        document.getElementById("killBtn").addEventListener("click", () => {
          smoother.kill(); // destroys all functionality
          console.log("üíÄ ScrollSmoother instance killed");
        });

        //  Log the current scroll velocity (px/sec)
        document.getElementById("logVelocity").addEventListener("click", () => {
          console.log("üìä Scroll Velocity:", smoother.getVelocity(), "px/sec");
        });

        //  Log current scrollTop value
        console.log("Current scroll position (px):", smoother.scrollTop());

        //  Log offset of the box element to center of viewport
        const offset = smoother.offset(".box", "center");
        console.log("Offset of .box to center:", offset);
      });
    </script>
  </body>
</html>
